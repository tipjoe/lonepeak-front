<header>
  <img src="/assets/images/lppn-logo.png" class="m-auto">
</header>
<div class="my-6 fade-in">
  <div *ngIf="currentState === 0" class="text-center"
    [class]="{ 'fade-in': currentState === 0 }">
    <p class="mb-6">
      Welcome to Lone Peak Park Neighbors!
    </p>
      <button mat-raised-button color="primary" (click)="learnMore()"
        class="mb-4 mr-4" aria-label="Learn more"
        matTooltip="Learn more">
        Learn More
      </button>
      <button mat-raised-button color="accent" (click)="join()"
        aria-label="Join"
        matTooltip="Join">
        Join
      </button>
  </div>

  <!-- Learn More -->
  <div *ngIf="currentState === 2">
    <button mat-button color="primary"
      (click)="learnMore()" aria-label="Back" matTooltip="Back">
      Back to Join
    </button>

    <div class="my-4">
      <app-about></app-about>
    </div>

    <button mat-button color="primary"
      (click)="learnMore()" aria-label="Back" matTooltip="Back">
      Back to Join
    </button>
  </div>

  <!-- Join/registration form -->
  <div *ngIf="currentState === 1" [class]="{ 'fade-in': currentState === 1 }">

    <button mat-button color="primary"
      *ngIf="mobileCompState !== 2"
      (click)="join()" aria-label="Back" matTooltip="Back">
      Back
    </button>

    <mat-stepper orientation="vertical" linear="true" #stepper>
      <ng-template matStepperIcon="edit">
        <mat-icon>check</mat-icon>
      </ng-template>
      <mat-step [stepControl]="step1FormGroup">
        <form [formGroup]="step1FormGroup">
          <ng-template matStepLabel>Hi, what's your name?</ng-template>

          <div class="mt-3 flex justify-between">
            <mat-form-field appearance="fill" class="two-inputs">
              <mat-label>First</mat-label>
              <input matInput placeholder="First name" formControlName="first" required>
            </mat-form-field>

            <mat-form-field appearance="fill" class="two-inputs">
              <mat-label>Last</mat-label>
              <input matInput placeholder="Last name" formControlName="last" required>
            </mat-form-field>
          </div>

          <mat-form-field appearance="fill" class="block">
            <mat-label>Address</mat-label>
            <input type="text" placeholder="Enter/select your address" aria-label="Address" matInput
              appAutocompleteForceSelection formControlName="address" [matAutocomplete]="autoAddress" required>
            <mat-autocomplete autoActiveFirstOption #autoAddress="matAutocomplete">
              <mat-option *ngFor="let option of filteredAddressOptions$ | async" [value]="option.value">
                {{ option.value }}
              </mat-option>
            </mat-autocomplete>
            <mat-hint>You must live here to join.</mat-hint>
          </mat-form-field>

          <div class="mt-6">
            <button mat-raised-button matStepperNext
              [disabled]="step1FormGroup.controls.address.invalid">
              Next
            </button>
          </div>
        </form>
      </mat-step>
      <mat-step [stepControl]="step2FormGroup">
        <ng-template matStepLabel>How can we reach you?</ng-template>
        <app-mobile-verification (verificationStateEvent)="mobileCompStateHandler($event)"></app-mobile-verification>

        <button mat-raised-button
          *ngIf="mobileCompState !== 1"
          class="mt-6"
          matStepperPrevious>
          Back
        </button>
      </mat-step>
    </mat-stepper>

  </div>


  <div class="my-8" *ngIf="currentState === 0">
    <img src="/assets/images/map.jpg" class="m-auto">

    <!-- <app-referrer-card></app-referrer-card> -->
  </div>
</div>
